---
layout: post
title:  "gitç³»åˆ—å·¥å…·"
date:   2025-06-18 22:55:41 +0800
categories: [Tech]
excerpt: gitå·¥å…·çš„å®‰è£…å’Œä½¿ç”¨
tags:
  - git
---

gitç›¸å…³å·¥å…·çš„å®‰è£…å’Œä½¿ç”¨ï¼Œå¦‚ `Git Bash`,`GitDesktop`ç­‰ã€‚

# äºŒã€git å·¥å…·

### 01 Git Desktop

download code: `https://github.com/desktop/desktop/tags`

download package: `https://github.com/shiftkey/desktop/releases`

### 02 Git Bash

Git Bash æ˜¯ä¸€ä¸ªåœ¨ Windows ç³»ç»Ÿä¸Šæ¨¡æ‹Ÿ Linux ç¯å¢ƒçš„å‘½ä»¤è¡Œç•Œé¢ï¼Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„å‘½ä»¤è¡Œç¯å¢ƒï¼Œå¯ä»¥åƒæ™®é€šçš„Unixæˆ–Linuxç»ˆç«¯ä¸€æ ·æ‰§è¡Œå„ç§å‘½ä»¤ã€‚

##### 1. Git Bashä¿®æ”¹é»˜è®¤æ‰“å¼€ä¹‹åçš„è·¯å¾„

<https://blog.csdn.net/zzfenglin/article/details/54646541>

### 03 git flow

[`git flow`](https://www.runoob.com/git/git-flow.html) is a branch manage tool to help team manage and release program better. Use command below to install it on ubuntu.

```bash
sudo apt-get install git-flow
```

1. `master`: æ°¸è¿œä¿æŒç¨³å®šå’Œå¯å‘å¸ƒçš„çŠ¶æ€
2. `develop`: ç”¨äºé›†æˆæ‰€æœ‰çš„å¼€å‘åˆ†æ”¯; ä»£è¡¨äº†æœ€æ–°çš„å¼€å‘è¿›åº¦; åŠŸèƒ½åˆ†æ”¯ã€å‘å¸ƒåˆ†æ”¯å’Œä¿®å¤åˆ†æ”¯éƒ½ä»è¿™é‡Œåˆ†æ”¯å‡ºå»ï¼Œæœ€ç»ˆåˆå¹¶å›è¿™é‡Œ
3. `feature`: ç”¨äºå¼€å‘æ–°åŠŸèƒ½; ä» develop åˆ†æ”¯åˆ›å»ºï¼Œå¼€å‘å®Œæˆååˆå¹¶å› develop åˆ†æ”¯; å‘½åè§„èŒƒ `feature/feature-name`
4. `release`: ç”¨äºå‡†å¤‡æ–°ç‰ˆæœ¬çš„å‘å¸ƒ; ä» develop åˆ†æ”¯åˆ›å»ºï¼Œè¿›è¡Œæœ€åçš„æµ‹è¯•å’Œä¿®å¤ï¼Œç„¶ååˆå¹¶å› develop å’Œ master åˆ†æ”¯ï¼Œå¹¶æ‰“ä¸Šç‰ˆæœ¬æ ‡ç­¾; å‘½åè§„èŒƒ`release/release-name`
5. `hotfix`: ç”¨äºä¿®å¤ç´§æ€¥é—®é¢˜; ä» master åˆ†æ”¯åˆ›å»ºï¼Œä¿®å¤å®Œæˆååˆå¹¶å› master å’Œ develop åˆ†æ”¯ï¼Œå¹¶æ‰“ä¸Šç‰ˆæœ¬æ ‡ç­¾; å‘½åè§„èŒƒ`hotfix/hotfix-name`

work flow

```bash
git flow init

# å¼€å‘æ–°åŠŸèƒ½
# develop is default base branch
git flow feature start new-feature 
git flow feature finish new-feature

# explicitly specify the base branch 
git flow feature start new-feature-name base-branch


# æµ‹è¯•å’Œä¿®å¤
git flow release start v1.0.0 
git flow release finish v1.0.0

# ä¿®å¤ç´§æ€¥é—®é¢˜
git flow hotfix start hotfix-1.0.1.
git flow hotfix finish hotfix-1.0.1
```

### 04 git emoji

|Emoji|Code|Usage|
|---|---|---|
|ğŸ‰|`:tada:`| Initial commit or celebration.|
|âœ¨|`:sparkles: `| Introducing a new feature.|
|ğŸ›|`:bug:      `| Fixing a bug.|
|ğŸ”¥|`:fire:     `| Removing code or files.|
|ğŸ“|`:memo:     `| Writing docs or updating comments.|
|ğŸš‘|`:ambulance:`| Quick fix (hotfix).|
|â™»ï¸ |`:recycle:`  |Refactoring code.|
|ğŸ”¨|`:hammer:`   | Developing or modifying tools.|
|ğŸš€|`:rocket:`   | Performance improvements.|
|âœ…|`:white_check_mark:` |Adding tests.|
|ğŸ“¦|`:package:`   | Adding or updating dependencies.|
|ğŸ’„|`:lipstick:` | Improving UI or cosmetic changes.|
|ğŸ|`:racehorse:` | Improving performance.|
|ğŸ”§|`:wrench:`   | Modifying configurations.|
|ğŸŒŸ|`:star:`     | Improving existing functionality.|
|âš™ï¸ |`:gear:`      | Configuration-related changes.|
|ğŸšš|`:truck:`    | Moving or renaming files.|
|ğŸ”’|`:lock:`     |Fixing security issues. |
|ğŸ—‘ï¸|`:wastebasket:`| Removing deprecated code.|

### 05 git-filter-repo

##### install

```bash
# ä¸‹è½½git-filter-repoå·¥å…·
git clone https://github.com/newren/git-filter-repo.git
# å®‰è£…
cd git-filter-repo/
sudo cp git-filter-repo /usr/local/bin
```

Another method to install it

```bash
pip3 install git-filter-repo
```

##### delete file and folder from git

<font color=Red>NOTE: If you use `git-filter-repo` to delete files, all history commits ID will be changed, even the commits that inherit from parent branch.</font>

åˆ é™¤æŒ‡å®šæ–‡ä»¶çš„gitè®°å½•

```bash
# ä¸‹è½½å¯¹åº”çš„åº“(å¦‚æœä¸é‡æ–°ä¸‹è½½ï¼Œå¯èƒ½ä¼šå‡ºé”™ï¼Œå‚ç…§åé¢çš„è¯´æ˜)
git clone url
# åˆ é™¤è®°å½•ã€‚ä»¥ä¸‹ç¤ºä¾‹ä¸ºåˆ é™¤äº†ä¸€ä¸ªPDFæ–‡ä»¶ã€‚è¿™ä¸ªæ“ä½œä¼šåˆ é™¤è¿œç¨‹ä»“åº“é“¾æ¥å’Œåˆ†æ”¯çš„é…ç½®ä¿¡æ¯ã€‚
git filter-repo --invert-paths --path "2019 Fast 3D Line Segment Detection From Unorganized Point Cloud.pdf"
# åˆ é™¤è®°å½•ã€‚ä»¥ä¸‹ç¤ºä¾‹ä¸ºåˆ é™¤äº†ä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚è¿™ä¸ªæ“ä½œä¼šåˆ é™¤è¿œç¨‹ä»“åº“é“¾æ¥å’Œåˆ†æ”¯çš„é…ç½®ä¿¡æ¯ã€‚
git filter-repo --invert-paths --path docs
# å¼ºåˆ¶ä¸Šä¼ åˆ°è¿œç¨‹ä»“åº“,urlä¸ºè¿œç¨‹ä»“åº“çš„é“¾æ¥ï¼Œbranchä¸ºæŒ‡å®šçš„åˆ†æ”¯ã€‚å¿…é¡»æ·»åŠ "--force"é€‰é¡¹ï¼Œå¦åˆ™ä¼šå¤±è´¥
git push --force url branch
```

å¦‚æœæ²¡æœ‰é‡æ–°ä¸‹è½½ï¼Œç›´æ¥åˆ é™¤è®°å½•å¯èƒ½ä¼šé‡åˆ°å¦‚ä¸‹é”™è¯¯

```bash
Aborting: Refusing to destructively overwrite repo history since
this does not look like a fresh clone.
```

è¿™æ˜¯ `git filter-repo` è¦æ±‚æ‚¨åœ¨ä¸€ä¸ªæ–°å…‹éš†çš„ä»“åº“ä¸Šè¿è¡Œä»¥ç¡®ä¿å®‰å…¨ã€‚è¿™ä¸ªå®‰å…¨æªæ–½æ˜¯ä¸ºäº†é˜²æ­¢æ— æ„ä¸­é‡å†™å¹¶ç ´åæ­£åœ¨ä½¿ç”¨çš„ä»“åº“çš„å†å²ã€‚ç”±äº `git filter-repo` å¯èƒ½ä¼šæ°¸ä¹…ä¿®æ”¹ä»“åº“çš„æäº¤å†å²ï¼Œä½¿ç”¨ä¸€ä¸ªæ–°å…‹éš†çš„ä»“åº“å¯ä»¥é¿å…é”™è¯¯åœ°è¦†ç›–é‡è¦çš„å·¥ä½œã€‚

å¦‚æœé‡åˆ°ä»¥ä¸‹é”™è¯¯

```bash
fatal: No configured push destination.
Either specify the URL from the command-line or configure a remote repository using
```

è¯´æ˜æ²¡æœ‰æŒ‡å®šè¿œç¨‹ä»“åº“çš„åœ°å€å’Œåˆ†æ”¯ã€‚

##### åˆ é™¤æ‰€æœ‰å†å²è®°å½•ä¸­å½“å‰æäº¤ä¸å­˜åœ¨çš„æ–‡ä»¶

```bash
# åˆ é™¤æ‰€æœ‰å†å²è®°å½•ä¸­å½“å‰æäº¤ä¸å­˜åœ¨çš„æ–‡ä»¶
git filter-repo --invert-paths --path-glob '!*'
# å‹ç¼©å¹¶æ¸…ç†ä»“åº“
git reflog expire --expire=now --all
git gc --prune=now --aggressive
# æ¨é€åˆ°è¿œç¨‹ä»“åº“
git push --force
```

---

# äº”ã€Q&A
